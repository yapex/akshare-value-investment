# AKShareä»·å€¼æŠ•èµ„åˆ†æç³»ç»Ÿ

> è·¨å¸‚åœºè‚¡ç¥¨è´¢åŠ¡åˆ†æå·¥å…· - æ”¯æŒAè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡

[![Python](https://img.shields.io/badge/Python-3.13+-blue.svg)](https://www.python.org/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.40+-red.svg)](https://streamlit.io/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green.svg)](https://fastapi.tiangolo.com/)
[![akshare](https://img.shields.io/badge/akshare-1.0.0+-green.svg)](https://www.akshare.xyz/)

## 1åˆ†é’Ÿä¸Šæ‰‹

### ç¬¬ä¸€æ¬¡ä½¿ç”¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository_url>
cd akshare-value-investment

# 2. å®‰è£…ä¾èµ–
uv sync

# 3. å¯åŠ¨æœåŠ¡(è‡ªåŠ¨å¯åŠ¨APIå’ŒWebåº”ç”¨)
./start_services.sh
```

### æ—¥å¸¸ä½¿ç”¨

```bash
# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬(æ¨è)
./start_services.sh

# æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨
# ç»ˆç«¯1: å¯åŠ¨åç«¯APIæœåŠ¡
poe api

# ç»ˆç«¯2: å¯åŠ¨å‰ç«¯Webåº”ç”¨
poe streamlit
```

è®¿é—® **http://localhost:8501**,è¾“å…¥è‚¡ç¥¨ä»£ç å³å¯å¼€å§‹åˆ†æ!

**æ”¯æŒæ ¼å¼**ï¼š
- Aè‚¡: `600519` æˆ– `SH600519` (èŒ…å°)
- æ¸¯è‚¡: `00700` æˆ– `700` (è…¾è®¯)
- ç¾è‚¡: `AAPL` (è‹¹æœ)

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ“Š è´¢åŠ¡è´¨é‡åˆ†æ

#### ğŸ’° ç›ˆåˆ©åˆ†æï¼ˆ5å¤§æ ¸å¿ƒæŒ‡æ ‡ï¼‰

ä»·å€¼æŠ•èµ„åˆ†æé€»è¾‘ï¼Œä»æ ¸å¿ƒåˆ°è´¨é‡ï¼š

1. **ğŸ’ æŠ•å…¥èµ„æœ¬å›æŠ¥ç‡(ROIC)** - èµ„æœ¬ä½¿ç”¨æ•ˆç‡ï¼ˆå¥½ç”Ÿæ„çš„ç¬¬ä¸€æ ‡å‡†ï¼‰
2. **ğŸ’° ç›ˆåˆ©èƒ½åŠ›å¦‚ä½•(EBITåˆ©æ¶¦ç‡)** - æ ¸å¿ƒä¸šåŠ¡ç›ˆåˆ©ï¼ˆä¼˜ç§€æ ‡å‡†ï¼š>25%ï¼‰
3. **ğŸ“ˆ è¥æ”¶æ˜¯å¦å¢é•¿(æˆé•¿æ€§)** - ä¸šåŠ¡æ‰©å¼ èƒ½åŠ›
4. **ğŸ’° åˆ©æ¶¦æ˜¯å¦ä¸ºçœŸ(å‡€ç°æ¯”)** - åˆ©æ¶¦è´¨é‡åˆ†æ
5. **ğŸ’µ ç°é‡‘è½¬åŒ–èƒ½åŠ›(è‡ªç”±ç°é‡‘æµ)** - çœŸé‡‘ç™½é“¶

#### ğŸ’³ å€ºåŠ¡åˆ†æ

è¯„ä¼°å…¬å¸è´¢åŠ¡æ æ†å’Œå¿å€ºèƒ½åŠ›ï¼š

1. **ğŸ’³ æœ‰æ¯å€ºåŠ¡æƒç›Šæ¯”** - å€ºåŠ¡æ°´å¹³åˆ†æ
2. **ğŸ’° æœ‰æ¯å€ºåŠ¡ä¸è‡ªç”±ç°é‡‘æµæ¯”ç‡** - å€ºåŠ¡å¿è¿˜èƒ½åŠ›
3. **ğŸ’§ æµåŠ¨æ€§åˆ†æ** - æµåŠ¨æ¯”ç‡ã€é€ŸåŠ¨æ¯”ç‡ã€åˆ©æ¯è¦†ç›–æ¯”ç‡

#### ğŸ’µ ç°é‡‘æµåˆ†æ

åŸºäºç°é‡‘æµç»„åˆåˆ¤æ–­ä¼ä¸šç”Ÿå‘½å‘¨æœŸå’Œç»è¥è´¨é‡ï¼š

1. **ğŸ’µ ç°é‡‘æµç±»å‹åˆ†æ** - ç»è¥/æŠ•èµ„/ç­¹èµ„ç°é‡‘æµç»„åˆåˆ¤æ–­
   - ğŸ„ å¥¶ç‰›å‹ï¼ˆæœ€ä½³ï¼‰ï¼šä¸»ä¸šé€ è¡€+æŠ•èµ„æ‰©å¼ +åˆ†çº¢å›è´­
   - ğŸ‚ è›®ç‰›å‹ï¼šä¸»ä¸šé€ è¡€ä½†æ¿€è¿›æ‰©å¼ éœ€èèµ„è¡¥è¡€
   - ğŸ§š å¦–ç²¾å‹ï¼šä¸»ä¸šä¸èµšé’±é å˜å–èµ„äº§ç»´æŒ
   - ğŸ„ ç—…ç‰›å‹ï¼šä¸»ä¸šå¤±è¡€é å–èµ„äº§+å€Ÿæ¬¾åº¦æ—¥
   - ğŸƒ éª—åƒå‹ï¼šæœ€å±é™©å®Œå…¨é å¤–éƒ¨è¾“è¡€

#### ğŸ“ˆ ä¼°å€¼

ä¼ä¸šå†…åœ¨ä»·å€¼è¯„ä¼°ï¼š

1. **ğŸ“ˆ DCFä¼°å€¼åˆ†æ** - æŠ˜ç°ç°é‡‘æµä¼°å€¼æ¨¡å‹
   - åŸºäºè‡ªç”±ç°é‡‘æµé¢„æµ‹ä¼ä¸šå†…åœ¨ä»·å€¼
   - å¯è‡ªå®šä¹‰ï¼šç°é‡‘æµå¢é•¿ç‡ã€æŠ˜ç°ç‡ã€æ°¸ç»­å¢é•¿ç‡
   - è®¡ç®—ä¼ä¸šä»·å€¼ã€DCFè‚¡æƒä»·å€¼ã€ä¼°å€¼æº¢ä»·/æŠ˜ä»·
   - é€šè¿‡å¯¹æ¯”DCFä»·å€¼å’Œè´¦é¢ä»·å€¼åˆ¤æ–­ä¼°å€¼æ°´å¹³
   - é€‚åˆç°é‡‘æµç¨³å®šå¯é¢„æµ‹çš„æˆç†Ÿä¼ä¸š

### ğŸ¯ æ™ºèƒ½è¯†åˆ«

è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ä»£ç æ‰€å±å¸‚åœº,æ— éœ€æ‰‹åŠ¨é€‰æ‹©!
- è¾“å…¥é”™è¯¯ä»£ç æ—¶æ™ºèƒ½æç¤º(å¦‚APPLâ†’AAPL)
- **æœç´¢å†å²**: è‡ªåŠ¨è®°å½•æŸ¥è¯¢è¿‡çš„è‚¡ç¥¨,æ”¯æŒå¿«é€Ÿæœç´¢
- **ä»£ç æ ‡å‡†åŒ–**: æ¸¯è‚¡è‡ªåŠ¨è¡¥é›¶(700â†’00700),é¿å…é‡å¤è®°å½•

### ğŸ“ˆ å¯è§†åŒ–å›¾è¡¨

- åŒYè½´å›¾è¡¨:æŸ±çŠ¶å›¾+æŠ˜çº¿å›¾ç»„åˆ
- åˆæ ¼çº¿å‚è€ƒ:0.8åˆ†ç•Œçº¿æ¸…æ™°æ ‡æ³¨
- å…³é”®æŒ‡æ ‡:ä¸€ç›®äº†ç„¶çš„æ ¸å¿ƒæ•°æ®

## é¡¹ç›®æ¶æ„

```
AKShareä»·å€¼æŠ•èµ„åˆ†æç³»ç»Ÿ
â”œâ”€â”€ ğŸŒ FastAPI Web API  (åç«¯æ•°æ®æœåŠ¡)
â”‚   â””â”€â”€ æä¾›è´¢åŠ¡æ•°æ®æŸ¥è¯¢API
â””â”€â”€ ğŸ“Š Streamlit Webåº”ç”¨ (å‰ç«¯å¯è§†åŒ–)
    â””â”€â”€ è‚¡ç¥¨è´¨é‡åˆ†æç•Œé¢
```

## APIæœåŠ¡ (å¼€å‘è€…)

### å¯åŠ¨APIæœåŠ¡

```bash
poe api
```

### è®¿é—®APIæ–‡æ¡£

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### å¥åº·æ£€æŸ¥

```bash
curl http://localhost:8000/health
```

### å¿«é€ŸæŸ¥è¯¢

```bash
# Aè‚¡è´¢åŠ¡æŒ‡æ ‡
curl "http://localhost:8000/api/v1/financial/indicators?symbol=SH600519&market=a_stock"

# æ¸¯è‚¡è´¢åŠ¡ä¸‰è¡¨
curl "http://localhost:8000/api/v1/financial/statements?symbol=00700&query_type=hk_financial_statements"

# ç¾è‚¡è´¢åŠ¡æŒ‡æ ‡
curl "http://localhost:8000/api/v1/financial/indicators?symbol=AAPL&market=us_stock"
```

## æŠ€æœ¯ç‰¹æ€§

- **è·¨å¸‚åœºæ”¯æŒ**: Aè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡å…¨è¦†ç›–
- **è´¢åŠ¡æ•°æ®**: è´¢åŠ¡æŒ‡æ ‡ + è´¢åŠ¡ä¸‰è¡¨å®Œæ•´è¦†ç›–
- **SOLIDæ¶æ„**: åŸºäºè®¾è®¡æ¨¡å¼çš„ä¼˜é›…æ¶æ„
- **ç±»å‹å®‰å…¨**: å®Œæ•´ç±»å‹æ³¨è§£å’ŒPydanticéªŒè¯
- **æµ‹è¯•è¦†ç›–**: å¤šå±‚çº§æµ‹è¯•è¦†ç›–

## è¯¦ç»†æ–‡æ¡£

- **APIæ–‡æ¡£**: http://localhost:8000/docs (å¯åŠ¨æœåŠ¡åè®¿é—®)
- **è´¢æŠ¥æ£€æŸ¥æ¸…å•**: [doc/è´¢æŠ¥æ£€æŸ¥æ¸…å•.md](doc/è´¢æŠ¥æ£€æŸ¥æ¸…å•.md)
- **å­—æ®µè¯´æ˜**: [doc/README.md](doc/README.md)

## ç¯å¢ƒè¦æ±‚

- Python >= 3.13
- uv åŒ…ç®¡ç†å™¨
- akshare >= 1.0.0

## å¸¸è§é—®é¢˜

### Q: ç¬¬ä¸€æ¬¡ä½¿ç”¨éœ€è¦åšä»€ä¹ˆ?
A:
```bash
# 1. å®‰è£…uvåŒ…ç®¡ç†å™¨
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–
git clone <repository_url>
cd akshare-value-investment
uv sync

# 3. å¯åŠ¨æœåŠ¡
./start_services.sh
```

### Q: å¯åŠ¨æç¤º"æ— æ³•è¿æ¥åˆ°APIæœåŠ¡"?
A: è¯·ç¡®ä¿å…ˆå¯åŠ¨APIæœåŠ¡ `poe api`,å†å¯åŠ¨Webåº”ç”¨ `poe streamlit`,æˆ–ç›´æ¥ä½¿ç”¨ `./start_services.sh` ä¸€é”®å¯åŠ¨

### Q: å¦‚ä½•ä½¿ç”¨å¯åŠ¨è„šæœ¬?
A: è¿è¡Œ `./start_services.sh` ä¼šè‡ªåŠ¨å¯åŠ¨APIå’ŒWebåº”ç”¨,æ¨èä½¿ç”¨!

### Q: è‚¡ç¥¨ä»£ç è¾“å…¥é”™è¯¯æ€ä¹ˆåŠ?
A: ç³»ç»Ÿä¼šæ™ºèƒ½æç¤ºå¸¸è§é”™è¯¯(å¦‚APPLâ†’AAPL),å¹¶ç»™å‡ºæ­£ç¡®ä»£ç å»ºè®®

### Q: æ”¯æŒå¤šå°‘å¹´çš„æ•°æ®æŸ¥è¯¢?
A: é»˜è®¤æŸ¥è¯¢æœ€è¿‘10å¹´æ•°æ®,å¯åœ¨ç•Œé¢è°ƒæ•´æŸ¥è¯¢å¹´æ•°

### Q: æœç´¢å†å²è®°å½•ä¿å­˜åœ¨å“ªé‡Œ?
A: å†å²è®°å½•ä¿å­˜åœ¨ `webapp/.cache/stock_history.json`,æ”¯æŒæŒä¹…åŒ–å­˜å‚¨

### Q: æ¸¯è‚¡ä»£ç æ ¼å¼ä¸ºä»€ä¹ˆæœ‰å˜åŒ–?
A: ç³»ç»Ÿè‡ªåŠ¨å°†æ¸¯è‚¡ä»£ç æ ‡å‡†åŒ–ä¸º5ä½æ•°å­—(å¦‚700â†’00700),é¿å…é‡å¤è®°å½•

### Q: å¦‚ä½•æ‰‹åŠ¨åœæ­¢æœåŠ¡?
A:
```bash
# åœæ­¢FastAPIæœåŠ¡ (ç«¯å£8000)
lsof -ti:8000 | xargs kill

# åœæ­¢StreamlitæœåŠ¡ (ç«¯å£8501)
lsof -ti:8501 | xargs kill

# ä¸€æ¬¡æ€§åœæ­¢æ‰€æœ‰æœåŠ¡
lsof -ti:8000,8501 | xargs kill
```
