# 财务指标获取原型

## 概述

精简的股票年报财务指标获取工具，专注于提供核心财务数据分析功能。

## 功能特性

- ✅ 获取股票最近5年年报财务指标
- ✅ 支持按年份过滤指定年年报数据
- ✅ 导出完整CSV文件（86个财务指标）
- ✅ 简洁的命令行界面

## 技术实现

### 数据源
- 使用 `akshare.stock_financial_analysis_indicator()` 接口
- 数据来源：东方财富网
- **只显示年报数据**（12月31日），过滤掉季度和半年报

### 支持的财务指标类别
1. **常用指标**: 归母净利润、营业总收入、营业成本、净利润等
2. **每股指标**: 每股收益、每股净资产、每股现金流等
3. **盈利能力**: ROE、ROA、毛利率、净利率等
4. **营运能力**: 周转率、周转天数等
5. **成长能力**: 营收增长率、利润增长率等
6. **偿债能力**: 资产负债率、流动比率等

## 使用方法

### 使用方法

```bash
# 获取最近5年年报数据（默认）
uv run python prototype/data-fetching/financial_indicators.py 600519

# 获取指定年份年报数据
uv run python prototype/data-fetching/financial_indicators.py 600519 --year 2023

# 保存到CSV文件
uv run python prototype/data-fetching/financial_indicators.py 600519 --output moutai_2023.csv
```

### 参数说明
- `symbol`: 股票代码（必需）
- `--year`: 指定年份，获取该年年报（可选）
- `--output`: CSV输出文件名（可选）

### 示例输出

```
正在获取股票 600519 的财务指标...
获取最近5年（2020年至今）数据
成功获取 23 条财务指标记录

筛选最近 5 年年报数据...
找到 5 条年报记录
年报日期: ['2024-12-31', '2023-12-31', '2022-12-31', '2021-12-31', '2020-12-31']

=== 股票 600519 财务指标摘要 ===
数据量: 5 条年报记录
财务指标: 86 个

关键指标（最新年报）:
  摊薄每股收益(元): 71.1152
  净资产收益率(%): 36.99
  总资产净利润率(%): 31.26
  流动比率: 4.45

=== 详细数据 ===
           日期  摊薄每股收益(元)  净资产收益率(%)  总资产净利润率(%)  销售毛利率(%)  资产负债率(%)  流动比率
19 2024-12-31      71.12      36.99       31.26       NaN     19.04  4.45
15 2023-12-31      61.71      34.65       29.42       NaN     17.98  4.62
11 2022-12-31      52.04      31.75       25.66       NaN     19.42  4.41
...
```

## 支持的股票代码

- **上海交易所**: 600000, 600001, ...
- **深圳交易所**: 000001, 000002, ...
- **创业板**: 300001, 300002, ...
- **科创板**: 688001, 688002, ...

## 数据格式说明

### 列名含义
- `日期`: 报告期（如 '2024-03-31' 表示2024年一季度）
- 其他列名: 具体的财务指标名称

### 数值说明
- 大部分财务指标以**元**为单位
- 比率类指标以**小数**形式表示（如 0.15 表示 15%）
- 周转天数以**天**为单位

## 错误处理

- 股票代码不存在时会显示空数据
- 网络连接问题会有相应提示
- 年份不存在时会显示可用的年份选项

## 下一步改进

1. 添加更多数据源支持
2. 实现数据可视化
3. 添加估值计算功能
4. 支持批量股票查询
5. 添加数据缓存机制

## 技术要点总结

- ✅ akshare 库的基本使用方法
- ✅ pandas 数据处理和过滤
- ✅ 长表数据格式处理
- ✅ 命令行参数解析
- ✅ CSV 文件导出
- ✅ 错误处理和用户友好提示